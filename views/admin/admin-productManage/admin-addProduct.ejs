
      

<%- include('../admin-partials/adminHedder') %>



        <!-- Sidebar Navidation Menus--><span class="heading">Main</span>
        <ul class="list-unstyled">
                <li><a href="/admin"> <i class="icon-home"></i>Home </a></li>
                <li><a href="/admin/admin-userManage""> <i class="icon-grid"></i>User Manage </a></li>
                <li class="active"><a href="/admin/admin-productManage"> <i class="icon-grid"></i>Product Manage </a></li>
                <li><a href="/admin/admin_coupensManage"> <i class="icon-grid"></i>Coupens Manage</a></li>
                <li><a href="/admin/admin_offers"> <i class="icon-grid"></i> Offer Manage</a></li>
                <li><a href="/admin/admin_categoryList"> <i class="icon-grid"></i> Category Manage </a></li>
                <li><a href="/admin/admin_banner"> <i class="icon-grid"></i> Banner Manage</a></li>
                <li><a href="/admin/admin_orders"> <i class="icon-grid"></i> Orders Manage</a></li>
               
                

                <% if (isSuperAdmin) { %>
                  <li><a href="/admin/admin_adminMnage"> <i class="icon-grid"></i> Admin Manage</a></li>
                <% } %>
                


               
      </nav>
      <!-- Sidebar Navigation end-->
      <div class="page-content">
        <!-- Page Header-->
        <div class="page-header no-margin-bottom">
          <div class="container-fluid">
            <h2 class="h5 no-margin-bottom">Add A New Product</h2>
          </div>
        </div>
        <!-- Breadcrumb-->
        <div class="container-fluid">
          <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="/admin">Home</a></li>
            <li class="breadcrumb-item active">Add Product</li>
          </ul>
        </div>
        <section class="no-padding-top">
          <div class="container-fluid">
            <div class="row">
             
              <div class="col-lg-4">
                <!-- <div class="block">
                  <div class="title"><strong>Modal Form</strong></div>
                  <div class="block-body text-center"> -->
                    <!-- <button type="button" data-toggle="modal" data-target="#myModal" class="btn btn-primary">Form in simple modal </button> -->
                    <!-- Modal-->
                    <div id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" class="modal fade text-left">
                      <div role="document" class="modal-dialog">
                        <div class="modal-content">
                          <div class="modal-header"><strong id="exampleModalLabel" class="modal-title">Signin Modal</strong>
                            <button type="button" data-dismiss="modal" aria-label="Close" class="close"><span aria-hidden="true">Ã—</span></button>
                          </div>
                          <div class="modal-body">
                            <p>Lorem ipsum dolor sit amet consectetur.</p>
                            <form>
                              <div class="form-group">
                                <label>Email</label>
                                <input type="email" placeholder="Email Address" class="form-control">
                              </div>
                              <div class="form-group">       
                                <label>Password</label>
                                <input type="password" placeholder="Password" class="form-control">
                              </div>
                              <div class="form-group">       
                                <input type="submit" value="Signin" class="btn btn-primary">
                              </div>
                            </form>
                          </div>
                          <div class="modal-footer">
                            <button type="button" data-dismiss="modal" class="btn btn-secondary">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Form Elements -->




              <% if (messages.success) { %>
                <div class="alert alert-success">
                    <%= messages.success %>
                </div>
            <% } %>
          
            <!-- Display error flash message -->
            <% if (messages.error) { %>
                <div id="error" style="color:rgb(220, 17, 17); font-size: 18px; font-weight: bold;">
                    <%= messages.error %>
                </div>
            <% } %>





              <div class="col-lg-12">
                <div class="block">
                  <div class="title"><strong>Add A New Product</strong></div>
                  <div class="block-body">


                    <form class="form-horizontal" method="post" enctype="multipart/form-data">
                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Product Name</label>
                        <div class="col-sm-9">
                          <input type="text" class="form-control" name="productName" id="productName" onkeyup="validateName()" required>
                          <span id="name-error"></span>
                        </div>
                      </div>
                      
                    



                      <div class="line"></div>
                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Discription</label>
                        <div class="col-sm-9">
                          <input type="text" name="discription" class="form-control" id="productDiscription" onkeyup="validateDiscription()" required>
                          <span id="des-error"></span>
                        </div>
                      </div>
                      <div class="line"></div>






                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Category</label>
                        <div class="col-sm-9">
                          <select name="category" class="form-control mb-3 mb-3">
                            <% for( let i = 0; i < category.length; i++ ) { %>
                              <option value="<%= category[i]._id %>"><%= category[i].categoryName %></option>
                            <% } %>
                            
                          </select>
                        </div>
                        <div class="col-sm-9 ml-auto">
                         
                        </div>
                      </div>



                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Price</label>
                        <div class="col-sm-9">
                          <input type="number" id="priceInput" name="price" class="form-control" required min="1">
                          <span id="price-error" style="color:red;"></span>
                        </div>
                      </div>
                      




                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Stock</label>
                        <div class="col-sm-9">
                          <input type="number" id="stockInput" name="stock" class="form-control" required min="1">
                          <span id="stock-error" style="color:red;"></span>
                        </div>
                      </div>
                      




                      <div class="form-group row">
                        <label class="col-sm-3 form-control-label">Offer Price</label>
                        <div class="col-sm-9">
                          <input type="number" id="offerPriceInput" name="offerPrice" class="form-control" required min="1">
                          <span id="offerPrice-error" style="color:red;"></span>
                        </div>
                      </div>
                    


                  
                      <div class="line"></div>
                          <div class="form-group row">
                            <label class="col-sm-3 form-control-label">Image</label>
                            <div class="col-sm-9">
                              <!-- Input field for selecting images -->
                              <input type="file" name="image" id="imageInput" class="form-control" multiple onchange="previewImages(event)">
                              <!-- Container for previewing uploaded images -->
                              <div id="imagePreview" class="mt-2"></div>
                            </div>
                          </div>
                          <div class="line"></div>


                         
                          


                      <div class="form-group row">
                        <div class="col-sm-9 ml-auto">
                          <!-- <button type="submit" class="btn btn-secondary">Add A photo </button> -->
                          <button type="submit" class="btn btn-primary">Add Product</button>
                        </div>
                      </div>
                    </form> 
                  </div>
                </div>
              </div>
            </div>
          </div>







          <script> 
            reload()
            const error = document.getElementById('error')
            function reload(){
        
                setTimeout(()=>{
                    error.innerHTML=''
                },3000)
            }
            </script>

         
          <script>
            const nameError = document.getElementById('name-error')
            const desError = document.getElementById('des-error')
        
            function validateName() {
              const name = document.getElementById('productName').value
              if (name.length <= 3) {
                nameError.innerHTML = 'Product name is required'
                nameError.style.color = 'red'
                return false
              }
              if (!name.match(/^[A-Z][a-zA-Z\s]*$/)) {
                nameError.innerHTML = 'Product name is Start with Capital Letter'
                nameError.style.color = 'red'
                return false
              } else {
                nameError.innerHTML = 'Valid'
                nameError.style.color = 'green'
                return true
              }
            }
        
            function validateDiscription() {
              const name = document.getElementById('productDiscription').value
              if (name.length <= 5) {
                desError.innerHTML = 'Product Discription is required'
                desError.style.color = 'red'
                return false
              }
              if (!name.match(/^[A-Za-z0-9\s.,'"!?()-]*$/)) {
                desError.innerHTML = 'Write full Discription of the product'
                desError.style.color = 'red'
                return false
              } else {
                desError.innerHTML = 'Valid'
                desError.style.color = 'green'
                return true
              }
            }
  
          </script>
           <script>
            function validatePrice() {
              const priceInput = document.getElementById('priceInput');
              const priceError = document.getElementById('price-error');
          
              if (priceInput.value <= 0 || isNaN(priceInput.value)) {
                priceError.textContent = 'Price must be a positive number.';
                priceInput.classList.add('is-invalid');
                return false;
              } else {
                priceError.textContent = '';
                priceInput.classList.remove('is-invalid');
                return true;
              }
            }
          
            function validateStock() {
              const stockInput = document.getElementById('stockInput');
              const stockError = document.getElementById('stock-error');
          
              if (stockInput.value <= 0 || isNaN(stockInput.value)) {
                stockError.textContent = 'Stock must be a positive number.';
                stockInput.classList.add('is-invalid');
                return false;
              } else {
                stockError.textContent = '';
                stockInput.classList.remove('is-invalid');
                return true;
              }
            }
          
            function validateOfferPrice() {
              const offerPriceInput = document.getElementById('offerPriceInput');
              const offerPriceError = document.getElementById('offerPrice-error');
          
              if (offerPriceInput.value <= 0 || isNaN(offerPriceInput.value)) {
                offerPriceError.textContent = 'Offer price must be a positive number.';
                offerPriceInput.classList.add('is-invalid');
                return false;
              } else {
                offerPriceError.textContent = '';
                offerPriceInput.classList.remove('is-invalid');
                return true;
              }
            }
          
            // Event listeners for input fields
            document.getElementById('priceInput').addEventListener('keyup', validatePrice);
            document.getElementById('stockInput').addEventListener('keyup', validateStock);
            document.getElementById('offerPriceInput').addEventListener('keyup', validateOfferPrice);
          </script>
          



          <!-- JavaScript for image preview and removal -->
          <script>
            // Function to preview uploaded images
            function previewImages(event) {
              const imagePreview = document.getElementById('imagePreview');
              imagePreview.innerHTML = ''; // Clear previous preview
          
              const files = event.target.files;
              for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();
          
                reader.onload = function (e) {
                  // Create image element for preview
                  const img = document.createElement('img');
                  img.src = e.target.result;
                  img.classList.add('img-thumbnail');
                  img.style.maxWidth = '80px';
                  img.style.maxHeight = '80px';
          
                  // Create button for image removal
                  const removeBtn = document.createElement('button');
                  removeBtn.textContent = 'Remove';
                  removeBtn.classList.add('btn', 'btn-danger', 'btn-sm' ,'mt-1');
                  removeBtn.onclick = function () {
                    // Remove the corresponding image and button from the preview
                    removeImage(img, removeBtn);
                    // Clear the file input value to allow selecting the same file again
                    // document.getElementById('imageInput').value = '';
                  };
          
                  // Append image and remove button to the preview container
                  imagePreview.appendChild(img);
                  imagePreview.appendChild(removeBtn);
                };
          
                // Read the image file as a data URL
                reader.readAsDataURL(file);
                console.log(reader);
              }
            }
          
            // Function to remove image and button
            function removeImage(img, btn) {
              console.log(img,'================');
              console.log(btn,'---------------------------');
              img.remove();
              btn.remove();
              
            }
          </script>



          <%- include('../admin-partials/adminFooter') %>