<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SIGN UP PAGE </title>
    <link rel="stylesheet" href="/user/login/style.css" />
</head>

<body>
    
    <div class="container mt-5" >


     <!-- Display success flash message -->
    <% if (messages.success) { %>
        <div class="alert alert-success">
            <%= messages.success %>
        </div>
    <% } %>

    <!-- Display error flash message -->
    <% if (messages.error) { %>
        <div id="error" style="color:rgb(145, 8, 8); font-size: 22px; font-weight: bold;" class="alert alert-warning">
            <%= messages.error %>
        </div>
    <% } %>


 
    

<form action="/signup" method="post">
    <h2 style="color: black; ">SIGN UP PAGE</h2>
    
    <% if (details) { %>
        <div class="input-field">
            <input type="text" name="name" value="<%= details.name %>" id="name" onkeyup="validateName()" required />
            <label style="color: rgb(0, 0, 0); ">ENTER NAME</label>
            <span id="name-error" style="font-size: 14px;"></span>
        </div>
        <div class="input-field">
            <input type="text" name="email" value="<%= details.email %>" id="email" onkeyup="validateEmail()" required />
            <label style="color: black; ">ENTER EMAIL</label>
            <span id="email-error"></span>
        </div>
        <div class="input-field">
            <input type="tel" name="phone" value="<%= details.phone %>" id="phone" onkeyup="validatePhone()" required />
            <label style="color: black; ">ENTER PHONE NUMBER</label>
            <span id="phone-error"></span>
        </div>



        <% } else { %>



            <div class="input-field">
                <input type="text" name="name" id="name" onkeyup="validateName()" required />
                <label style="color: rgb(0, 0, 0); ">ENTER NAME</label>
                <span id="name-error" style="font-size: 14px;"></span>
            </div>
            <div class="input-field">
                <input type="text" name="email" id="email" onkeyup="validateEmail()" required />
                <label style="color: black; ">ENTER EMAIL</label>
                <span id="email-error"></span>
            </div>
            <div class="input-field">
                <input type="tel" name="phone" id="phone" onkeyup="validatePhone()" required />
                <label style="color: black; ">ENTER PHONE NUMBER</label>
                <span id="phone-error"></span>
            </div>


    <% } %>




    <div class="input-field">
        <input type="password" name="password" id="password" onkeyup="validatePassword()"  required />
        <label style="color: black; ">ENTER PASSWORD</label>
        <span id="password-error"></span>
    </div>

    <button type="submit" style="color: black; ">SIGN UP</button>
            <div class="Create-account">
                <p style="color: rgb(128, 20, 20); "><a href="/login" style="color: black; ">YOU HAVE AN ACCOUNT?LOGIN ACCOUNT</a></p>
            </div>

    
  
</form>
    </div>


    
    <script> 
    reload()
    const error = document.getElementById('error')
    function reload(){

        setTimeout(()=>{
            error.innerHTML=''
        },4000)
    }
    </script>


<script>
    const nameError = document.getElementById('name-error');
    const emailError = document.getElementById('email-error');
    const phoneError = document.getElementById('phone-error');
    const passwordError = document.getElementById('password-error');

    function validateName() {
        const name = document.getElementById('name').value;
        if (name.length <= 3) {
            nameError.innerHTML = 'Name is required';
            nameError.style.color = 'red';
            return false;
        }
        if (!name.match(/^[A-Z][a-z\s]*$/)) {
            nameError.innerHTML = 'Name should start with a Capital letter';
            nameError.style.color = 'red';
            return false;
        } else {
            nameError.innerHTML = 'Valid';
            nameError.style.color = 'green';
            return true;
        }
    }

    function validateEmail() {
        const email = document.getElementById('email').value;
        if (email.length === 0) {
            emailError.innerHTML = 'Email is required';
            emailError.style.color = 'red';
            return false;
        }
        if (!email.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)) {
            emailError.innerHTML = 'Enter a valid email address';
            emailError.style.color = 'red';
            return false;
        } else {
            emailError.innerHTML = 'Valid';
            emailError.style.color = 'green';
            return true;
        }
    }

    function validatePhone() {
        const phone = document.getElementById('phone').value;
        if (phone.length === 0) {
            phoneError.innerHTML = 'Phone number is required';
            phoneError.style.color = 'red';
            return false;
        }
        if (!phone.match(/^\d{10}$/)) {
            phoneError.innerHTML = 'Enter a valid 10-digit phone number';
            phoneError.style.color = 'red';
            return false;
        } else {
            phoneError.innerHTML = 'Valid';
            phoneError.style.color = 'green';
            return true;
        }
    }

    function validatePassword() {
        const password = document.getElementById('password').value;
        if (password.length === 0) {
            passwordError.innerHTML = 'Password is at least 6 characters long';
            passwordError.style.color = 'red';
            return false;
        }
        if (!password.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/)) {
            passwordError.innerHTML = 'Contain 1 lowercase, 1 Uppercase , 1 number, and 1 Special character ';
            passwordError.style.color = 'red';
            return false;
        } else {
            passwordError.innerHTML = 'Valid';
            passwordError.style.color = 'green';
            return true;
        }
    }
</script>





</body>

</html>