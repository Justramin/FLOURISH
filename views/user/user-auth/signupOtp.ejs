<!DOCTYPE html>
<!-- coding by helpme_coder -->
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>USER SIGNUP VERIFICATION CODE</title>
    <link rel="stylesheet" href="/user/login/style.css" />
</head>

<body>
    <div class="container">


		<% if (messages.error) { %>
			<div id="error" style="color:rgb(255, 255, 255); font-size: 22px; font-weight: bold;" class="alert alert-warning">
				<%= messages.error %>
			</div>
		<% } %>


        <form action="/signupOtp" method="post">
            <h2 style="color: black; ">  SIGNUP VERIFICATION CODE</h2>
            <div class="input-field">
                <input type="text" name="otp" required />
                <label style="color: black; ">Enter OTP Code:</label>
            </div>
            
            <button type="submit"><a href="/home" style="color: black; ">PROCEED</a></button>
            <br>
                <div class="col-8 m-3">
                    <p id="countdown">Waiting for OTP...</p>
                </div>
              
                    <button id="resendButton" onclick="resendOTP()" class="btn btn-primary-lg" style="color: black; " disabled  >Resend OTP</button>

                    <br>
           
            <a href="/login" style="color: black; ">Back to Login</a>
        </form>
    </div>
    <script> 
    /*    OTP VALIDATION     */
			var otpError = document.getElementById("otp-error");
			var submitOTPError = document.getElementById("submitOTP-error");
			var invalidOTP = document.getElementById("invalidotp");
			invalidOTP.style.display = 'block';
			setTimeout(() => {
				invalidOTP.style.display = "none"
			}, 2000)
	
			function validateOTP() {
				var otpname = document.getElementById("otp").value;
				if (otpname.length == 0) {
					otpError.innerHTML = "Please enter OTP";
					return false;
	
				} else if (!otpname.match(/^[0-9]{4,}$/)) {
					otpError.innerHTML = "Only numbers allowed";
					return false;
				}
	
				else if (otpname.length != 6) {
					otpError.innerHTML = "6 digit OTP";
					return false;
				}
	
				otpError.innerHTML = "valid";
				return true;
			}
	
			function validateOTPForm() {
				if (!validateOTP()) {
					submitOTPError.style.display = "block";
					submitOTPError.innerHTML = "OTP required";
					setTimeout(() => {
						submitOTPError.style.display = "none";
					}, 2000);
					return false;
				}
	
			}
	
	
		</script>
	
		<script>
			let countdownValue = 60; // Countdown duration in seconds
			let countdownInterval;
	
			function startCountdown() {
				countdownInterval = setInterval(function () {
					if (countdownValue > 0) {
						countdownValue--;
						document.getElementById('countdown').innerText = `Resend OTP in ${countdownValue} seconds`;
					} else {
						clearInterval(countdownInterval);
						document.getElementById('countdown').innerText = 'Waiting for OTP...';
						document.getElementById('resendButton').disabled = false;
					}
				}, 1000);
			}
	
			function resendOTP() {
				// Simulate OTP resend logic
				// Replace this with your actual OTP resend logic   
	
				window.location.href = "/resetOtp"
	
				// Disable the resend button and start the countdown
				document.getElementById('resendButton').disabled = true;
				countdownValue = 60; // Reset countdown value
				startCountdown();
			}
	
			// Start the initial countdown
			startCountdown();
            </script>
</body>

</html>